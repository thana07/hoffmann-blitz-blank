<!-- Hero Section -->
<section class="relative min-h-[40vh] flex items-center justify-center overflow-hidden bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900">
  <!-- Background Effects -->
  <div class="absolute inset-0 overflow-hidden">
    <div class="absolute -top-40 -right-40 w-96 h-96 bg-brand-500/10 rounded-full blur-3xl"></div>
    <div class="absolute -bottom-40 -left-40 w-96 h-96 bg-brand-500/10 rounded-full blur-3xl"></div>
  </div>

  <!-- Content -->
  <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20 text-center">
    <span class="inline-flex items-center gap-2 px-4 py-2 bg-brand-500/20 border border-brand-500/30 rounded-full text-brand-400 text-sm font-medium mb-6">
      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z" />
      </svg>
      Kostenlos & Unverbindlich
    </span>
    <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold text-white mb-6">
      Online-<span class="text-transparent bg-clip-text bg-gradient-to-r from-brand-400 to-brand-500">Kostenrechner</span>
    </h1>
    <p class="text-xl text-slate-400 max-w-2xl mx-auto">
      Erhalten Sie in nur 3 Schritten eine schnelle Kostenschätzung für Ihr Projekt
    </p>
  </div>
</section>

<!-- Calculator Section -->
<section class="py-16 bg-slate-50">
  <div class="container mx-auto px-4 sm:px-6 lg:px-8">
    <div class="max-w-4xl mx-auto">

      <!-- Calculator Card -->
      <div class="bg-white rounded-2xl shadow-xl overflow-hidden">
        <!-- Steps Indicator -->
        <div class="bg-gradient-to-r from-slate-900 to-slate-800 p-6">
          <div class="flex justify-between items-center">
            <div class="text-center flex-1">
              <div class="w-12 h-12 rounded-full flex items-center justify-center mx-auto text-lg font-bold transition-all duration-300"
                   [class]="currentStep() >= 1 ? 'bg-brand-500 text-slate-900' : 'bg-slate-700 text-slate-400'">
                @if (currentStep() > 1) {
                  <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                  </svg>
                } @else {
                  1
                }
              </div>
              <p class="mt-2 text-sm font-medium" [class]="currentStep() >= 1 ? 'text-brand-400' : 'text-slate-500'">Leistung</p>
            </div>
            <div class="flex-auto border-t-2 transition-colors duration-500 mx-4" [class]="currentStep() > 1 ? 'border-brand-500' : 'border-slate-700'"></div>
            <div class="text-center flex-1">
              <div class="w-12 h-12 rounded-full flex items-center justify-center mx-auto text-lg font-bold transition-all duration-300"
                   [class]="currentStep() >= 2 ? 'bg-brand-500 text-slate-900' : 'bg-slate-700 text-slate-400'">
                @if (currentStep() > 2) {
                  <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                  </svg>
                } @else {
                  2
                }
              </div>
              <p class="mt-2 text-sm font-medium" [class]="currentStep() >= 2 ? 'text-brand-400' : 'text-slate-500'">Details</p>
            </div>
            <div class="flex-auto border-t-2 transition-colors duration-500 mx-4" [class]="currentStep() > 2 ? 'border-brand-500' : 'border-slate-700'"></div>
            <div class="text-center flex-1">
              <div class="w-12 h-12 rounded-full flex items-center justify-center mx-auto text-lg font-bold transition-all duration-300"
                   [class]="currentStep() >= 3 ? 'bg-brand-500 text-slate-900' : 'bg-slate-700 text-slate-400'">3</div>
              <p class="mt-2 text-sm font-medium" [class]="currentStep() >= 3 ? 'text-brand-400' : 'text-slate-500'">Ergebnis</p>
            </div>
          </div>
        </div>

        <!-- Form Content -->
        <div class="p-8">
          <form [formGroup]="calculatorForm">
            <!-- Step 1: Service Selection -->
            @if (currentStep() === 1) {
              <div class="animate-fade-in">
                <h2 class="text-2xl font-bold text-slate-900 mb-2 text-center">Welche Leistung benötigen Sie?</h2>
                <p class="text-slate-500 text-center mb-8">Wählen Sie den passenden Service für Ihr Projekt</p>
                <div class="grid grid-cols-2 sm:grid-cols-3 gap-4">
                  @for(service of services(); track service.slug) {
                    <div>
                      <input type="radio" [id]="service.slug" formControlName="service" [value]="service.slug" class="hidden peer">
                      <label [for]="service.slug" class="flex flex-col items-center justify-center p-6 border-2 border-slate-200 rounded-xl cursor-pointer hover:bg-slate-50 hover:border-brand-300 peer-checked:border-brand-500 peer-checked:bg-brand-50 peer-checked:shadow-lg transition-all duration-300 h-full group">
                        <span [innerHTML]="service.icon" class="text-brand-500 group-hover:scale-110 transition-transform"></span>
                        <span class="mt-3 font-semibold text-center text-slate-700 group-hover:text-brand-600">{{ service.title }}</span>
                      </label>
                    </div>
                  }
                </div>
                <div class="mt-8 flex justify-end">
                  <button (click)="nextStep()" [disabled]="calculatorForm.get('service')?.invalid"
                          class="inline-flex items-center gap-2 bg-brand-500 text-slate-900 font-bold py-3 px-8 rounded-xl hover:bg-brand-400 transition-all duration-300 disabled:bg-slate-300 disabled:cursor-not-allowed shadow-lg shadow-brand-500/30 hover:shadow-brand-500/50">
                    Weiter
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                    </svg>
                  </button>
                </div>
              </div>
            }

            <!-- Step 2: Details -->
            @if (currentStep() === 2) {
              <div class="animate-fade-in">
                <h2 class="text-2xl font-bold text-slate-900 mb-2 text-center">Projektdetails</h2>
                <p class="text-slate-500 text-center mb-8">Erzählen Sie uns mehr über Ihr Vorhaben</p>
                <div class="space-y-6">
                  <div>
                    <label for="size" class="block text-sm font-semibold text-slate-700 mb-2">Größe des Objekts (in m²)</label>
                    <input type="number" id="size" formControlName="size" placeholder="z.B. 80"
                           class="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-transparent transition-all">
                  </div>
                  <div>
                    <label class="block text-sm font-semibold text-slate-700 mb-2">Etage / Zugänglichkeit</label>
                    <select formControlName="floor" class="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-transparent transition-all">
                      <option value="eg">Erdgeschoss</option>
                      <option value="og">Obergeschoss (ohne Aufzug)</option>
                      <option value="dg">Dachgeschoss (ohne Aufzug)</option>
                      <option value="aufzug">Mit Aufzug</option>
                    </select>
                  </div>
                  <div>
                    <label class="block text-sm font-semibold text-slate-700 mb-2">Art des Abfalls</label>
                    <select formControlName="wasteType" class="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-transparent transition-all">
                      <option value="normal">Normaler Hausrat / Sperrmüll</option>
                      <option value="gemischt">Gemischte Abfälle (z.B. mit Bauschutt)</option>
                      <option value="sondermuell">Mit Sondermüll (z.B. Farben, Chemikalien)</option>
                    </select>
                  </div>
                  <div class="flex items-center gap-3 p-4 bg-slate-50 rounded-xl">
                    <input type="checkbox" id="disassembly" formControlName="disassembly" class="h-5 w-5 text-brand-500 border-slate-300 rounded focus:ring-brand-500">
                    <label for="disassembly" class="text-slate-700 font-medium">Möbel-Demontage erforderlich</label>
                  </div>
                </div>
                <div class="mt-8 flex justify-between">
                  <button (click)="prevStep()" class="inline-flex items-center gap-2 bg-slate-200 text-slate-700 font-semibold py-3 px-6 rounded-xl hover:bg-slate-300 transition-colors">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                    </svg>
                    Zurück
                  </button>
                  <button (click)="calculate()"
                          class="inline-flex items-center gap-2 bg-brand-500 text-slate-900 font-bold py-3 px-8 rounded-xl hover:bg-brand-400 transition-all duration-300 shadow-lg shadow-brand-500/30">
                    Kosten berechnen
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z" />
                    </svg>
                  </button>
                </div>
              </div>
            }

            <!-- Step 3: Result -->
            @if (currentStep() === 3 && calculationResult(); as result) {
              <div class="text-center animate-fade-in">
                <div class="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6">
                  <svg class="w-10 h-10 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                  </svg>
                </div>
                <h2 class="text-2xl font-bold text-slate-900 mb-2">Ihre unverbindliche Kostenschätzung</h2>
                <p class="text-slate-500 mb-6">Basierend auf Ihren Angaben</p>

                <div class="bg-gradient-to-r from-brand-500 to-brand-400 p-8 rounded-2xl my-8 text-slate-900">
                  <p class="text-5xl md:text-6xl font-extrabold">
                    {{ result.min }} € - {{ result.max }} €
                  </p>
                  <p class="mt-2 text-slate-800 font-medium">(inkl. MwSt.)</p>
                </div>

                <p class="text-slate-700 max-w-2xl mx-auto text-lg">{{ resultText() }}</p>

                <div class="mt-6 p-4 bg-blue-50 border border-blue-200 rounded-xl max-w-2xl mx-auto">
                  <p class="text-sm text-blue-800">
                    <strong>Hinweis:</strong> Dies ist eine grobe Schätzung. Der endgültige Preis kann je nach Aufwand und den genauen Gegebenheiten vor Ort variieren. Kontaktieren Sie uns für ein genaues Angebot!
                  </p>
                </div>

                <div class="mt-8 flex flex-wrap gap-4 justify-center">
                  <button (click)="startOver()" class="inline-flex items-center gap-2 bg-slate-200 text-slate-700 font-semibold py-3 px-6 rounded-xl hover:bg-slate-300 transition-colors">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                    </svg>
                    Neu berechnen
                  </button>
                  <a href="tel:017681281360" class="inline-flex items-center gap-2 bg-brand-500 text-slate-900 font-bold py-3 px-6 rounded-xl hover:bg-brand-400 transition-all duration-300 shadow-lg">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                    </svg>
                    Jetzt anrufen
                  </a>
                </div>
              </div>
            }
          </form>
        </div>
      </div>

      <!-- Contact Form after Result -->
      @if (currentStep() === 3) {
        <div class="mt-12">
          <div class="text-center mb-8">
            <h3 class="text-2xl font-bold text-slate-900">Oder senden Sie uns direkt eine Anfrage</h3>
            <p class="text-slate-500 mt-2">Wir melden uns schnellstmöglich bei Ihnen</p>
          </div>
          <app-contact-form></app-contact-form>
        </div>
      }

    </div>
  </div>
</section>

<!-- FAQ Section -->
<section class="py-20 bg-white">
  <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-12">
      <span class="inline-block px-4 py-2 bg-brand-100 text-brand-600 rounded-full text-sm font-medium mb-4">
        Häufige Fragen
      </span>
      <h2 class="text-3xl md:text-4xl font-bold text-slate-900">
        Fragen zum Kostenrechner
      </h2>
    </div>

    <div class="space-y-4">
      <!-- FAQ Item 1 -->
      <div class="bg-slate-50 rounded-xl overflow-hidden">
        <div class="p-6">
          <h3 class="font-bold text-slate-900 text-lg mb-2">Wie genau ist die Kostenschätzung?</h3>
          <p class="text-slate-600">
            Unser Kostenrechner bietet eine erste Orientierung basierend auf Durchschnittswerten. Der tatsächliche Preis kann je nach individuellen Gegebenheiten vor Ort variieren. Für ein verbindliches Angebot vereinbaren wir gerne einen kostenlosen Besichtigungstermin.
          </p>
        </div>
      </div>

      <!-- FAQ Item 2 -->
      <div class="bg-slate-50 rounded-xl overflow-hidden">
        <div class="p-6">
          <h3 class="font-bold text-slate-900 text-lg mb-2">Was ist im Preis enthalten?</h3>
          <p class="text-slate-600">
            Unsere Preise beinhalten in der Regel: Arbeitskraft, Fahrzeug, fachgerechte Entsorgung und besenreine Übergabe. Spezielle Entsorgungen (z.B. Sondermüll) oder Zusatzleistungen werden separat berechnet.
          </p>
        </div>
      </div>

      <!-- FAQ Item 3 -->
      <div class="bg-slate-50 rounded-xl overflow-hidden">
        <div class="p-6">
          <h3 class="font-bold text-slate-900 text-lg mb-2">Ist die Besichtigung wirklich kostenlos?</h3>
          <p class="text-slate-600">
            Ja! Wir bieten eine 100% kostenlose und unverbindliche Besichtigung vor Ort an. Erst danach erhalten Sie ein detailliertes Festpreisangebot – ohne versteckte Kosten.
          </p>
        </div>
      </div>

      <!-- FAQ Item 4 -->
      <div class="bg-slate-50 rounded-xl overflow-hidden">
        <div class="p-6">
          <h3 class="font-bold text-slate-900 text-lg mb-2">Wie schnell können Sie starten?</h3>
          <p class="text-slate-600">
            In der Regel können wir innerhalb von 24-48 Stunden nach Auftragserteilung beginnen. Bei dringenden Fällen bieten wir auch Express-Service am selben Tag an.
          </p>
        </div>
      </div>

      <!-- FAQ Item 5 -->
      <div class="bg-slate-50 rounded-xl overflow-hidden">
        <div class="p-6">
          <h3 class="font-bold text-slate-900 text-lg mb-2">Welche Zahlungsmöglichkeiten gibt es?</h3>
          <p class="text-slate-600">
            Wir akzeptieren Barzahlung, EC-Karte und Überweisung. Die Zahlung erfolgt erst nach erfolgreicher Durchführung der Arbeiten und Ihrer Zufriedenheit.
          </p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- CTA Section -->
<section class="py-16 bg-gradient-to-r from-brand-500 to-brand-600">
  <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
    <h2 class="text-2xl md:text-3xl font-bold text-slate-900 mb-4">
      Lieber persönlich beraten lassen?
    </h2>
    <p class="text-lg text-slate-800 mb-8">
      Rufen Sie uns an – wir sind für Sie da!
    </p>
    <a href="tel:017681281360"
       class="inline-flex items-center gap-3 px-8 py-4 bg-slate-900 text-white font-bold rounded-xl hover:bg-slate-800 transition-all duration-300 transform hover:scale-105 shadow-lg">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
      </svg>
      0176 81281360
    </a>
  </div>
</section>
